# DEX äºŒæœŸåŠŸèƒ½è§„åˆ’

> åŸºäº UniswapV2 æ¶æ„çš„æ‰©å±•å’Œå‡çº§æ–¹æ¡ˆ

**åˆ›å»ºæ—¥æœŸ**: 2025-10-28  
**ç‰ˆæœ¬**: 1.0

---

## ğŸ“‹ ç›®å½•

- [ä¸€ã€å½“å‰æ¶æ„åˆ†æ](#ä¸€å½“å‰æ¶æ„åˆ†æ)
- [äºŒã€UniswapV2 vs V3 å¯¹æ¯”](#äºŒuniswapv2-vs-v3-å¯¹æ¯”)
- [ä¸‰ã€ä¸»æµ DEX åŠŸèƒ½å¯¹æ¯”](#ä¸‰ä¸»æµ-dex-åŠŸèƒ½å¯¹æ¯”)
- [å››ã€äºŒæœŸåŠŸèƒ½è§„åˆ’](#å››äºŒæœŸåŠŸèƒ½è§„åˆ’)
- [äº”ã€V3 å‡çº§æ–¹æ¡ˆ](#äº”v3-å‡çº§æ–¹æ¡ˆ)
- [å…­ã€å®æ–½è·¯çº¿å›¾](#å…­å®æ–½è·¯çº¿å›¾)

---

## ä¸€ã€å½“å‰æ¶æ„åˆ†æ

### 1.1 ç¡®è®¤ï¼šæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ UniswapV2 âœ…

**æ ¸å¿ƒç‰¹å¾**:

```solidity
// âœ… UniswapV2 å…¸å‹ç‰¹å¾

1. æ’å®šä¹˜ç§¯åšå¸‚å•† (x * y = k)
2. å…¨èŒƒå›´æµåŠ¨æ€§ (0 åˆ°æ— ç©·å¤§)
3. 0.3% å›ºå®šæ‰‹ç»­è´¹
4. LP token (ERC20)
5. TWAP ä»·æ ¼é¢„è¨€æœº
6. Flash Swaps
```

**æˆ‘ä»¬çš„å®ç°**:
- `DEXPair.sol` - å®Œå…¨éµå¾ª UniswapV2Pair
- `DEXFactory.sol` - å®Œå…¨éµå¾ª UniswapV2Factory
- `DEXRouter.sol` - å®Œå…¨éµå¾ª UniswapV2Router02
- `RouterLibrary.sol` - å®Œå…¨éµå¾ª UniswapV2Library

### 1.2 V2 çš„ä¼˜åŠ¿

âœ… **ç®€å•æ˜“æ‡‚**
- æ’å®šä¹˜ç§¯å…¬å¼ç›´è§‚
- æµåŠ¨æ€§æä¾›è€…é—¨æ§›ä½
- ä»£ç å®ç°ç®€æ´

âœ… **Gas æ•ˆç‡è¾ƒé«˜**
- åˆçº¦é€»è¾‘ç®€å•
- é“¾ä¸Šè®¡ç®—å°‘

âœ… **ç”Ÿæ€æˆç†Ÿ**
- å¤§é‡æˆåŠŸæ¡ˆä¾‹
- ç»è¿‡å……åˆ†æµ‹è¯•
- ç¤¾åŒºæ”¯æŒå®Œå–„

### 1.3 V2 çš„å±€é™æ€§

âŒ **èµ„æœ¬æ•ˆç‡ä½**
- æµåŠ¨æ€§åˆ†æ•£åœ¨ 0 åˆ°æ— ç©·å¤§
- å¤§éƒ¨åˆ†æµåŠ¨æ€§æ°¸è¿œç”¨ä¸åˆ°
- ç›¸åŒèµ„é‡‘é‡ä¸‹æ·±åº¦ä¸è¶³

âŒ **æ‰‹ç»­è´¹å›ºå®š**
- 0.3% æ— æ³•è°ƒæ•´
- æ— æ³•é€‚åº”ä¸åŒå¸‚åœºï¼ˆç¨³å®šå¸ vs é•¿å°¾èµ„äº§ï¼‰

âŒ **æ— å¸¸æŸå¤±ä¸¥é‡**
- ä»·æ ¼åç¦»è¶Šå¤§æŸå¤±è¶Šå¤§
- LP æ”¶ç›Šå¯èƒ½ä¸ºè´Ÿ

âŒ **ç¼ºå°‘é«˜çº§åŠŸèƒ½**
- æ— é™ä»·å•
- æ— èšåˆäº¤æ˜“
- æ— è·¨é“¾æ”¯æŒ

---

## äºŒã€UniswapV2 vs V3 å¯¹æ¯”

### 2.1 æ ¸å¿ƒå·®å¼‚

| ç‰¹æ€§ | UniswapV2 (æˆ‘ä»¬) | UniswapV3 |
|------|-----------------|-----------|
| **æµåŠ¨æ€§èŒƒå›´** | å…¨èŒƒå›´ (0, âˆ) | é›†ä¸­æµåŠ¨æ€§ (è‡ªå®šä¹‰åŒºé—´) |
| **èµ„æœ¬æ•ˆç‡** | ä½ | é«˜ (æœ€å¤š 4000x) |
| **æ‰‹ç»­è´¹** | å›ºå®š 0.3% | å¤šæ¡£ä½ (0.01%, 0.05%, 0.3%, 1%) |
| **LP Token** | ERC20 | NFT (ERC721) |
| **ä»·æ ¼é¢„è¨€æœº** | TWAP | æ›´ç²¾ç¡®çš„ TWAP |
| **å®ç°å¤æ‚åº¦** | ç®€å• â­â­ | å¤æ‚ â­â­â­â­â­ |
| **Gas æˆæœ¬** | ä½ | ä¸­ç­‰ |
| **æ— å¸¸æŸå¤±** | é«˜ | å¯æ§ (é›†ä¸­åœ¨åŒºé—´å†…) |

### 2.2 V3 çš„é›†ä¸­æµåŠ¨æ€§

```
UniswapV2 (æˆ‘ä»¬å½“å‰):
ä»·æ ¼
  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚     â”‚  æµåŠ¨æ€§å‡åŒ€åˆ†å¸ƒ    â”‚
  â”‚     â”‚                 â”‚
  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â†’ ä»·æ ¼èŒƒå›´
      0                   âˆ

UniswapV3:
ä»·æ ¼
  â”‚           â”Œâ”€â”€â”€â”
  â”‚       â”Œâ”€â”€â”€â”¤ A â”œâ”€â”€â”€â”
  â”‚   â”Œâ”€â”€â”€â”¤ B â”‚   â”‚ C â”œâ”€â”€â”€â”
  â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
  â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â†’ ä»·æ ¼èŒƒå›´
    ç”¨æˆ·å¯ä»¥é€‰æ‹©ä»»æ„åŒºé—´æä¾›æµåŠ¨æ€§
```

**æ¡ˆä¾‹å¯¹æ¯”**:

```
åœºæ™¯: USDT/USDC ç¨³å®šå¸å¯¹

V2 (æˆ‘ä»¬):
- æµåŠ¨æ€§: 0.8 - 1.2 åªå  20%
- æµåŠ¨æ€§: 0 - 0.8 å  40% (å‡ ä¹ä¸ç”¨)
- æµåŠ¨æ€§: 1.2 - âˆ å  40% (å‡ ä¹ä¸ç”¨)
- èµ„æœ¬åˆ©ç”¨ç‡: ~20%

V3:
- æµåŠ¨æ€§: 0.99 - 1.01 é›†ä¸­ 80%
- èµ„æœ¬åˆ©ç”¨ç‡: ~4000% (æå‡ 20 å€)
- æ‰‹ç»­è´¹æ”¶ç›Š: æå‡ 20 å€
```

### 2.3 V3 çš„å¤šæ¡£æ‰‹ç»­è´¹

```
UniswapV2 (æˆ‘ä»¬): å›ºå®š 0.3%

UniswapV3: çµæ´»æ‰‹ç»­è´¹
- 0.01% â†’ ç¨³å®šå¸å¯¹ (USDT/USDC)
- 0.05% â†’ ä¸»æµå¸å¯¹ (ETH/USDT)
- 0.3%  â†’ æ™®é€šå¸å¯¹
- 1%    â†’ é«˜é£é™©/é•¿å°¾èµ„äº§
```

### 2.4 V3 çš„ NFT LP

```solidity
// V2 (æˆ‘ä»¬): LP Token æ˜¯ ERC20
balanceOf(user) = 1000 LP tokens
å¯åˆ†å‰²ã€å¯è½¬ç§»ã€åŒè´¨åŒ–

// V3: LP Position æ˜¯ NFT (ERC721)
tokenId = 123456
- lowerTick: 1000
- upperTick: 2000
- liquidity: 5000
- feeGrowth: ...
ä¸å¯åˆ†å‰²ã€æ¯ä¸ªç‹¬ç‰¹
```

---

## ä¸‰ã€ä¸»æµ DEX åŠŸèƒ½å¯¹æ¯”

### 3.1 é¡¶çº§ DEX åŠŸèƒ½çŸ©é˜µ

| åŠŸèƒ½ | æˆ‘ä»¬ | Uniswap V3 | Curve | Balancer | PancakeSwap | SushiSwap | 1inch |
|------|------|-----------|-------|----------|-------------|-----------|-------|
| **åŸºç¡€äº¤æ˜“** | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| **æµåŠ¨æ€§æŒ–çŸ¿** | âŒ | âŒ | âœ… | âœ… | âœ… | âœ… | âŒ |
| **é›†ä¸­æµåŠ¨æ€§** | âŒ | âœ… | âŒ | âŒ | âœ… | âŒ | N/A |
| **ç¨³å®šå¸ä¼˜åŒ–** | âŒ | âŒ | âœ… | âœ… | âŒ | âŒ | N/A |
| **å¤šä»£å¸æ± ** | âŒ | âŒ | âœ… | âœ… | âŒ | âŒ | N/A |
| **åŠ¨æ€æ‰‹ç»­è´¹** | âŒ | âœ… | âœ… | âœ… | âŒ | âŒ | N/A |
| **æ²»ç†ä»£å¸** | âŒ | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| **èšåˆäº¤æ˜“** | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… |
| **é™ä»·å•** | âŒ | âŒ | âŒ | âŒ | âœ… | âœ… | âœ… |
| **è·¨é“¾æ¡¥** | âŒ | âŒ | âŒ | âŒ | âœ… | âœ… | âœ… |
| **NFT äº¤æ˜“** | âŒ | âœ… | âŒ | âŒ | âœ… | âŒ | âŒ |
| **æ æ†äº¤æ˜“** | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… | âŒ |
| **æ°¸ç»­åˆçº¦** | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ |
| **æœŸæƒ** | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ |

### 3.2 å…³é”®åŠŸèƒ½è¯¦è§£

#### 1. **æµåŠ¨æ€§æŒ–çŸ¿** (Liquidity Mining)

**ç¼ºå¤±æŒ‡æ•°**: â­â­â­â­â­ (éå¸¸é‡è¦)

```solidity
// Curve, Balancer, PancakeSwap éƒ½æœ‰

function stake(uint256 lpAmount) external;
function unstake(uint256 lpAmount) external;
function getReward() external;

// ç”¨æˆ·æä¾›æµåŠ¨æ€§ â†’ è·å¾— LP token â†’ è´¨æŠ¼ LP â†’ èµšå–æ²»ç†ä»£å¸
```

**æ¡ˆä¾‹**: 
- Curve: veCRV (æŠ•ç¥¨é”å®š)
- Balancer: veBAL
- PancakeSwap: CAKE ä»£å¸

**æ”¶ç›Š**:
- å¸å¼•æµåŠ¨æ€§
- å†·å¯åŠ¨
- ç¤¾åŒºæ¿€åŠ±

---

#### 2. **èšåˆäº¤æ˜“** (Trade Aggregation)

**ç¼ºå¤±æŒ‡æ•°**: â­â­â­â­â­

```
ç”¨æˆ·æƒ³äº¤æ˜“: 100 ETH â†’ USDT

DEX èšåˆå™¨ (1inch):
- 40 ETH â†’ Uniswap (ä»·æ ¼æœ€ä¼˜)
- 35 ETH â†’ Curve
- 25 ETH â†’ Balancer
æ€»ä»·æ ¼ä¼˜äºä»»ä½•å•ä¸€ DEX
```

**æˆ‘ä»¬ç¼ºå¤±**:
- è·¯å¾„ä¼˜åŒ–ç®—æ³•
- å¤š DEX è¯¢ä»·
- æ‹†å•æ‰§è¡Œ

---

#### 3. **é™ä»·å•** (Limit Order)

**ç¼ºå¤±æŒ‡æ•°**: â­â­â­â­

```solidity
// PancakeSwap, SushiSwap, 1inch éƒ½æœ‰

createOrder(
  tokenIn: USDT,
  tokenOut: ETH,
  amountIn: 10000,
  targetPrice: 2000,  // å½“ ETH è·Œåˆ° 2000 USDT æ—¶ä¹°å…¥
  expiry: timestamp
);
```

**å®ç°æ–¹å¼**:
1. **é“¾ä¸Šè®¢å•ç°¿** (Gas è´¹é«˜)
2. **é“¾ä¸‹è®¢å• + é“¾ä¸Šç»“ç®—** (æ¨è)

---

#### 4. **ç¨³å®šå¸ä¼˜åŒ–** (StableSwap)

**ç¼ºå¤±æŒ‡æ•°**: â­â­â­â­

**Curve çš„æ ¸å¿ƒç«äº‰åŠ›**:

```python
# Curve çš„ StableSwap å…¬å¼
# åœ¨ä»·æ ¼ 1:1 é™„è¿‘ä¿æŒä½æ»‘ç‚¹

x + y = k  (ç¨³å®šå¸åŒºé—´)
x * y = k  (ä»·æ ¼åç¦»æ—¶)

# æ··åˆæ›²çº¿
```

**å¯¹æ¯”**:
```
äº¤æ˜“: 1000 USDT â†’ USDC

V2 (æˆ‘ä»¬):
è¾“å‡º: 997 USDC
æ»‘ç‚¹: 0.3%

Curve:
è¾“å‡º: 999.95 USDC
æ»‘ç‚¹: 0.005%

ä¼˜åŠ¿æ˜æ˜¾ï¼
```

---

#### 5. **å¤šä»£å¸æ± ** (Multi-Token Pools)

**ç¼ºå¤±æŒ‡æ•°**: â­â­â­

**Balancer ç‰¹è‰²**:

```
V2 (æˆ‘ä»¬): åªæ”¯æŒ 2 ä»£å¸æ± 
- ETH/USDT
- DAI/USDC

Balancer: æ”¯æŒ 2-8 ä»£å¸æ± 
- ETH/USDT/DAI/USDC (4 ä»£å¸)
- è‡ªå®šä¹‰æƒé‡: 40% ETH, 30% USDT, 20% DAI, 10% USDC
```

**ä¼˜åŠ¿**:
- ä¸€æ¬¡æä¾›å¤šä»£å¸æµåŠ¨æ€§
- è‡ªåŠ¨å†å¹³è¡¡
- é™ä½æ— å¸¸æŸå¤±

---

#### 6. **åŠ¨æ€æ‰‹ç»­è´¹** (Dynamic Fees)

**ç¼ºå¤±æŒ‡æ•°**: â­â­â­

```solidity
// V2 (æˆ‘ä»¬): å›ºå®š 0.3%
uint256 constant FEE = 997;  // 0.3% = (1000 - 997) / 1000

// åŠ¨æ€æ‰‹ç»­è´¹ (æ ¹æ®æ³¢åŠ¨æ€§è°ƒæ•´)
æ³¢åŠ¨æ€§ä½ (ç¨³å®šå¸) â†’ 0.01%
æ³¢åŠ¨æ€§ä¸­ â†’ 0.05%
æ³¢åŠ¨æ€§é«˜ â†’ 0.5% - 2%
```

---

#### 7. **è·¨é“¾æ¡¥** (Cross-Chain Bridge)

**ç¼ºå¤±æŒ‡æ•°**: â­â­â­â­

```
ç”¨æˆ·éœ€æ±‚: Arbitrum çš„ ETH â†’ Optimism çš„ USDT

è·¨é“¾ DEX:
1. Arbitrum é”å®š ETH
2. Optimism é‡Šæ”¾ USDT
3. æ‰‹ç»­è´¹: ~$1-5
```

**ä¸»æµæ–¹æ¡ˆ**:
- LayerZero
- Axelar
- Wormhole

---

#### 8. **æ²»ç†ä»£å¸** (Governance Token)

**ç¼ºå¤±æŒ‡æ•°**: â­â­â­â­â­

```solidity
// æ²»ç†åŠŸèƒ½
1. æŠ•ç¥¨å†³å®šæ‰‹ç»­è´¹æ¯”ä¾‹
2. æŠ•ç¥¨å†³å®šæ”¯æŒå“ªäº›ä»£å¸å¯¹
3. æŠ•ç¥¨å†³å®šåè®®å‡çº§
4. è´¨æŠ¼è·å¾—æ‰‹ç»­è´¹åˆ†æˆ

// ä»£å¸ç»æµå­¦
- æ€»ä¾›åº”é‡: 1,000,000,000
- æµåŠ¨æ€§æŒ–çŸ¿: 40%
- å›¢é˜Ÿ: 20%
- æŠ•èµ„äºº: 15%
- ç¤¾åŒº: 25%
```

---

#### 9. **æ°¸ç»­åˆçº¦** (Perpetual Futures)

**ç¼ºå¤±æŒ‡æ•°**: â­â­â­

**dYdX, GMX ç‰¹è‰²**:

```
ç”¨æˆ·æ“ä½œ:
- å¼€ 10x å¤šå•: çœ‹æ¶¨ ETH
- å¼€ 5x ç©ºå•: çœ‹è·Œ BTC
- èµ„é‡‘è´¹ç‡: å¤šç©ºå¹³è¡¡

é“¾ä¸Šå®ç°:
- é¢„è¨€æœºå–‚ä»·
- æ¸…ç®—æœºåˆ¶
- ä¿è¯é‡‘ç®¡ç†
```

---

#### 10. **æ æ†äº¤æ˜“** (Margin Trading)

**ç¼ºå¤±æŒ‡æ•°**: â­â­â­

```solidity
// é—ªç”µè´· + æ æ†

ç”¨æˆ·æœ¬é‡‘: 1000 USDT
æ æ†: 5x

æ‰§è¡Œ:
1. é—ªç”µè´·å€Ÿ 4000 USDT
2. 5000 USDT ä¹°å…¥ ETH
3. ETH ä»·æ ¼ä¸Šæ¶¨ 10%
4. å–å‡º ETH è·å¾— 5500 USDT
5. è¿˜æ¬¾ 4000 USDT + æ‰‹ç»­è´¹
6. å‡€æ”¶ç›Š: 1500 USDT - æ‰‹ç»­è´¹
7. æ”¶ç›Šç‡: 50% (vs ä¸æ æ† 10%)
```

---

## å››ã€äºŒæœŸåŠŸèƒ½è§„åˆ’

### 4.1 æ ¸å¿ƒåŠŸèƒ½ (å¿…åš)

#### P0 - æé«˜ä¼˜å…ˆçº§

| åŠŸèƒ½ | é‡è¦æ€§ | éš¾åº¦ | å·¥ä½œé‡ | æ”¶ç›Š |
|------|--------|------|--------|------|
| **æµåŠ¨æ€§æŒ–çŸ¿** | â­â­â­â­â­ | â­â­â­ | 2 å‘¨ | å¸å¼•æµåŠ¨æ€§ |
| **æ²»ç†ä»£å¸** | â­â­â­â­â­ | â­â­â­ | 2 å‘¨ | ç¤¾åŒºæ¿€åŠ± |
| **èšåˆäº¤æ˜“** | â­â­â­â­â­ | â­â­â­â­ | 3 å‘¨ | æœ€ä¼˜ä»·æ ¼ |
| **é™ä»·å•** | â­â­â­â­ | â­â­â­ | 2 å‘¨ | ç”¨æˆ·ä½“éªŒ |

#### P1 - é«˜ä¼˜å…ˆçº§

| åŠŸèƒ½ | é‡è¦æ€§ | éš¾åº¦ | å·¥ä½œé‡ | æ”¶ç›Š |
|------|--------|------|--------|------|
| **ç¨³å®šå¸ä¼˜åŒ–** | â­â­â­â­ | â­â­â­â­ | 3 å‘¨ | ç¨³å®šå¸æ·±åº¦ |
| **å¤šé“¾æ”¯æŒ** | â­â­â­â­ | â­â­â­â­â­ | 4 å‘¨ | å¸‚åœºæ‰©å±• |
| **è·¨é“¾æ¡¥** | â­â­â­ | â­â­â­â­â­ | 4 å‘¨ | è·¨é“¾æµåŠ¨æ€§ |
| **NFT äº¤æ˜“** | â­â­â­ | â­â­â­ | 2 å‘¨ | æ–°å¸‚åœº |

#### P2 - ä¸­ä¼˜å…ˆçº§

| åŠŸèƒ½ | é‡è¦æ€§ | éš¾åº¦ | å·¥ä½œé‡ | æ”¶ç›Š |
|------|--------|------|--------|------|
| **æ æ†äº¤æ˜“** | â­â­â­ | â­â­â­â­ | 3 å‘¨ | é«˜çº§ç”¨æˆ· |
| **æœŸæƒäº¤æ˜“** | â­â­ | â­â­â­â­â­ | 6 å‘¨ | è¡ç”Ÿå“ |
| **æ°¸ç»­åˆçº¦** | â­â­ | â­â­â­â­â­ | 8 å‘¨ | è¡ç”Ÿå“ |

---

### 4.2 è¯¦ç»†å®ç°æ–¹æ¡ˆ

#### ğŸ¯ 1. æµåŠ¨æ€§æŒ–çŸ¿ (Liquidity Mining)

**å·¥ä½œé‡**: 2 å‘¨

**åˆçº¦æ¶æ„**:

```solidity
// contracts/farming/MasterChef.sol
contract MasterChef {
    struct PoolInfo {
        IERC20 lpToken;           // LP token åœ°å€
        uint256 allocPoint;       // åˆ†é…ç‚¹æ•°
        uint256 lastRewardBlock;  // æœ€åå¥–åŠ±åŒºå—
        uint256 accRewardPerShare; // ç´¯è®¡æ¯è‚¡å¥–åŠ±
    }
    
    struct UserInfo {
        uint256 amount;           // ç”¨æˆ·è´¨æŠ¼é‡
        uint256 rewardDebt;       // å¥–åŠ±å€ºåŠ¡
    }
    
    IERC20 public rewardToken;    // DEX ä»£å¸
    uint256 public rewardPerBlock; // æ¯åŒºå—å¥–åŠ±
    
    mapping(uint256 => PoolInfo) public poolInfo;
    mapping(uint256 => mapping(address => UserInfo)) public userInfo;
    
    // è´¨æŠ¼ LP token
    function deposit(uint256 _pid, uint256 _amount) external;
    
    // å–å‡º LP token
    function withdraw(uint256 _pid, uint256 _amount) external;
    
    // é¢†å–å¥–åŠ±
    function harvest(uint256 _pid) external;
    
    // æŸ¥è¯¢å¾…é¢†å–å¥–åŠ±
    function pendingReward(uint256 _pid, address _user) external view returns (uint256);
}
```

**åç«¯æ”¯æŒ**:

```typescript
// Farming Module
src/modules/farming/
  â”œâ”€â”€ farming.controller.ts
  â”œâ”€â”€ farming.service.ts
  â”œâ”€â”€ entities/
  â”‚   â”œâ”€â”€ farm-pool.entity.ts
  â”‚   â””â”€â”€ user-stake.entity.ts
  â””â”€â”€ dto/
      â”œâ”€â”€ stake.dto.ts
      â””â”€â”€ harvest.dto.ts

// API æ¥å£
GET  /farming/pools              // æ‰€æœ‰çŸ¿æ± åˆ—è¡¨
GET  /farming/pools/:id          // çŸ¿æ± è¯¦æƒ…
POST /farming/stake              // è´¨æŠ¼
POST /farming/unstake            // å–æ¶ˆè´¨æŠ¼
POST /farming/harvest            // æ”¶å‰²å¥–åŠ±
GET  /farming/user/:address      // ç”¨æˆ·æŒ–çŸ¿ä¿¡æ¯
GET  /farming/apy/:poolId        // è®¡ç®— APY
```

**æ”¶ç›Š**:
- âœ… å†·å¯åŠ¨æµåŠ¨æ€§
- âœ… ç¤¾åŒºæ¿€åŠ±
- âœ… é”å®š TVL
- âœ… ä»£å¸ä»·å€¼

---

#### ğŸ¯ 2. æ²»ç†ä»£å¸ (DEX Token)

**å·¥ä½œé‡**: 2 å‘¨

**ä»£å¸ç»æµå­¦**:

```solidity
// contracts/token/DEXToken.sol
contract DEXToken is ERC20Votes {
    // æ€»ä¾›åº”: 1,000,000,000 DEX
    uint256 public constant TOTAL_SUPPLY = 1_000_000_000e18;
    
    // åˆ†é…
    // 40% â†’ æµåŠ¨æ€§æŒ–çŸ¿ (4 å¹´çº¿æ€§é‡Šæ”¾)
    // 20% â†’ å›¢é˜Ÿ (2 å¹´é”å®š + 2 å¹´çº¿æ€§é‡Šæ”¾)
    // 15% â†’ æŠ•èµ„äºº (1 å¹´é”å®š + 1 å¹´çº¿æ€§é‡Šæ”¾)
    // 25% â†’ ç¤¾åŒºé‡‘åº“
    
    constructor() ERC20("DEX Token", "DEX") ERC20Permit("DEX Token") {
        _mint(address(this), TOTAL_SUPPLY);
    }
}

// contracts/governance/Timelock.sol
// contracts/governance/Governor.sol
```

**æ²»ç†åŠŸèƒ½**:

```solidity
// ææ¡ˆç¤ºä¾‹
ææ¡ˆ 1: è°ƒæ•´ USDT/USDC æ‰‹ç»­è´¹ä» 0.3% åˆ° 0.05%
ææ¡ˆ 2: æ·»åŠ æ–°äº¤æ˜“å¯¹: ARB/ETH
ææ¡ˆ 3: å‡çº§ Router åˆçº¦
ææ¡ˆ 4: è°ƒæ•´æŒ–çŸ¿å¥–åŠ±åˆ†é…

// æŠ•ç¥¨æµç¨‹
1. ææ¡ˆ (éœ€è¦ 100,000 DEX)
2. æŠ•ç¥¨ (7 å¤©)
3. æ‰§è¡Œ (Timelock 2 å¤©å»¶è¿Ÿ)
```

---

#### ğŸ¯ 3. èšåˆäº¤æ˜“ (Aggregator)

**å·¥ä½œé‡**: 3 å‘¨

**æ ¸å¿ƒç®—æ³•**:

```typescript
// åˆ†å‰²è®¢å•ç®—æ³•
async function splitOrder(
  tokenIn: string,
  tokenOut: string,
  amountIn: bigint,
): Promise<SplitResult> {
  // 1. æŸ¥è¯¢æ‰€æœ‰ DEX çš„ä»·æ ¼
  const dexes = [
    { name: 'Uniswap', price: 2000, liquidity: 1000000 },
    { name: 'SushiSwap', price: 2001, liquidity: 500000 },
    { name: 'Curve', price: 1999, liquidity: 800000 },
  ];
  
  // 2. æŒ‰ä»·æ ¼æ’åº
  dexes.sort((a, b) => b.price - a.price);
  
  // 3. åŠ¨æ€è§„åˆ’æ‰¾æœ€ä¼˜åˆ†å‰²
  const splits = optimizeSplit(amountIn, dexes);
  
  // 4. è¿”å›åˆ†å‰²æ–¹æ¡ˆ
  return {
    splits: [
      { dex: 'Curve', amount: 400000, expectedOut: 799600 },
      { dex: 'Uniswap', amount: 500000, expectedOut: 1000000 },
      { dex: 'SushiSwap', amount: 100000, expectedOut: 200100 },
    ],
    totalOut: 1999700,
    saving: 1500, // æ¯”å•ä¸€ DEX å¤šå¾—åˆ° 1500
  };
}
```

**åˆçº¦æ”¯æŒ**:

```solidity
// contracts/aggregator/DEXAggregator.sol
contract DEXAggregator {
    struct SplitSwap {
        address dex;           // DEX Router åœ°å€
        uint256 amountIn;      // è¾“å…¥é‡
        bytes callData;        // è°ƒç”¨æ•°æ®
    }
    
    function multiSwap(
        SplitSwap[] calldata swaps,
        uint256 minAmountOut
    ) external returns (uint256 amountOut);
}
```

---

#### ğŸ¯ 4. é™ä»·å• (Limit Order)

**å·¥ä½œé‡**: 2 å‘¨

**é“¾ä¸‹è®¢å• + é“¾ä¸Šç»“ç®—**:

```typescript
// è®¢å•ç»“æ„
interface LimitOrder {
  id: string;
  user: string;
  tokenIn: string;
  tokenOut: string;
  amountIn: bigint;
  targetPrice: number;      // ç›®æ ‡ä»·æ ¼
  expiry: number;           // è¿‡æœŸæ—¶é—´
  status: 'pending' | 'filled' | 'cancelled';
  signature: string;        // ç”¨æˆ·ç­¾å
}

// åç«¯æœåŠ¡
class LimitOrderService {
  // 1. åˆ›å»ºè®¢å• (é“¾ä¸‹)
  async createOrder(order: LimitOrder): Promise<void> {
    // éªŒè¯ç­¾å
    // ä¿å­˜åˆ°æ•°æ®åº“
    // åŠ å…¥ç›‘æ§é˜Ÿåˆ—
  }
  
  // 2. ç›‘æ§ä»·æ ¼
  async watchPrice(): Promise<void> {
    setInterval(async () => {
      const orders = await this.getPendingOrders();
      for (const order of orders) {
        const currentPrice = await this.getPrice(order.tokenIn, order.tokenOut);
        if (this.shouldExecute(order, currentPrice)) {
          await this.executeOrder(order);
        }
      }
    }, 1000); // æ¯ç§’æ£€æŸ¥
  }
  
  // 3. æ‰§è¡Œè®¢å• (é“¾ä¸Š)
  async executeOrder(order: LimitOrder): Promise<string> {
    // è°ƒç”¨åˆçº¦æ‰§è¡Œäº¤æ˜“
    // æ›´æ–°è®¢å•çŠ¶æ€
    return txHash;
  }
}
```

**åˆçº¦æ”¯æŒ**:

```solidity
// contracts/limit-order/LimitOrderExecutor.sol
contract LimitOrderExecutor {
    struct Order {
        address user;
        address tokenIn;
        address tokenOut;
        uint256 amountIn;
        uint256 minAmountOut;
        uint256 expiry;
        bytes signature;
    }
    
    function executeOrder(Order calldata order) external {
        // éªŒè¯ç­¾å
        require(verifySignature(order), "Invalid signature");
        
        // éªŒè¯è¿‡æœŸæ—¶é—´
        require(block.timestamp <= order.expiry, "Order expired");
        
        // æ‰§è¡Œäº¤æ˜“
        uint256 amountOut = DEXRouter.swap(...);
        require(amountOut >= order.minAmountOut, "Price not met");
        
        // è½¬è´¦ç»™ç”¨æˆ·
        IERC20(order.tokenOut).transfer(order.user, amountOut);
    }
}
```

---

#### ğŸ¯ 5. ç¨³å®šå¸ä¼˜åŒ– (StableSwap)

**å·¥ä½œé‡**: 3 å‘¨

**Curve çš„ StableSwap ç®—æ³•**:

```solidity
// contracts/stableswap/StableSwap.sol
contract StableSwap {
    // æ”¾å¤§ç³»æ•° (Amplification Coefficient)
    uint256 public A = 85;
    
    // StableSwap ä¸å˜é‡
    // A * sum(x_i) * n^n + D = A * D * n^n + D^(n+1) / (n^n * prod(x_i))
    function getD(uint256[] memory balances) internal view returns (uint256 D) {
        // è®¡ç®— D (æ€»æµåŠ¨æ€§)
        // ä½¿ç”¨ç‰›é¡¿è¿­ä»£æ³•
    }
    
    function getY(uint256 i, uint256 j, uint256 x, uint256[] memory balances) 
        internal view returns (uint256 y) {
        // è®¡ç®—äº¤æ¢åçš„ y
    }
    
    function exchange(uint256 i, uint256 j, uint256 dx, uint256 minDy) 
        external returns (uint256 dy) {
        // ç¨³å®šå¸äº¤æ¢
        dy = getY(i, j, balances[i] + dx, balances) - balances[j];
        require(dy >= minDy, "Slippage");
    }
}
```

**å¯¹æ¯”**:

```
åœºæ™¯: 1000 USDT â†’ USDC

V2 AMM:
è¾“å‡º = (1000 * 997 * reserveOut) / (reserveIn * 1000 + 1000 * 997)
     = 997 USDC
æ»‘ç‚¹ = 0.3%

StableSwap (A=85):
è¾“å‡º = 999.95 USDC
æ»‘ç‚¹ = 0.005%

æå‡ 60 å€ï¼
```

---

#### ğŸ¯ 6. å¤šé“¾æ”¯æŒ

**å·¥ä½œé‡**: 4 å‘¨

**æ”¯æŒçš„é“¾**:

```yaml
L1:
  - Ethereum Mainnet

L2:
  - Arbitrum âœ… (æ¨èä¼˜å…ˆ)
  - Optimism âœ… (æ¨èä¼˜å…ˆ)
  - Base âœ…
  - Polygon zkEVM
  - zkSync Era

ä¾§é“¾:
  - BSC (Binance Smart Chain)
  - Polygon PoS
  - Avalanche C-Chain
```

**æ¶æ„æ”¹é€ **:

```typescript
// å¤šé“¾é…ç½®
interface ChainConfig {
  chainId: number;
  name: string;
  rpcUrl: string;
  explorerUrl: string;
  contracts: {
    factory: string;
    router: string;
    weth: string;
  };
}

const chains: ChainConfig[] = [
  {
    chainId: 42161,
    name: 'Arbitrum One',
    rpcUrl: 'https://arb1.arbitrum.io/rpc',
    explorerUrl: 'https://arbiscan.io',
    contracts: {
      factory: '0x...',
      router: '0x...',
      weth: '0x82af49447d8a07e3bd95bd0d56f35241523fbab1',
    },
  },
  // ... æ›´å¤šé“¾
];

// æœåŠ¡æ”¹é€ 
class MultiChainBlockchainProvider {
  private clients: Map<number, PublicClient> = new Map();
  
  getClient(chainId: number): PublicClient {
    return this.clients.get(chainId);
  }
  
  async getReserves(chainId: number, pairAddress: string) {
    const client = this.getClient(chainId);
    return await client.readContract({
      address: pairAddress,
      abi: pairAbi,
      functionName: 'getReserves',
    });
  }
}
```

---

#### ğŸ¯ 7. è·¨é“¾æ¡¥

**å·¥ä½œé‡**: 4 å‘¨

**æ–¹æ¡ˆé€‰æ‹©**: LayerZero

```solidity
// contracts/bridge/DEXBridge.sol
import "@layerzerolabs/contracts/lzApp/NonblockingLzApp.sol";

contract DEXBridge is NonblockingLzApp {
    // è·¨é“¾äº¤æ˜“
    function crossChainSwap(
        uint16 dstChainId,      // ç›®æ ‡é“¾
        address tokenIn,        // æºé“¾ä»£å¸
        address tokenOut,       // ç›®æ ‡é“¾ä»£å¸
        uint256 amountIn,
        uint256 minAmountOut
    ) external payable {
        // 1. åœ¨æºé“¾é”å®š/é”€æ¯ä»£å¸
        IERC20(tokenIn).transferFrom(msg.sender, address(this), amountIn);
        
        // 2. å‘é€è·¨é“¾æ¶ˆæ¯
        bytes memory payload = abi.encode(msg.sender, tokenOut, minAmountOut);
        _lzSend(dstChainId, payload, payable(msg.sender), address(0), bytes(""), msg.value);
    }
    
    // æ¥æ”¶è·¨é“¾æ¶ˆæ¯
    function _nonblockingLzReceive(
        uint16 _srcChainId,
        bytes memory _srcAddress,
        uint64 _nonce,
        bytes memory _payload
    ) internal override {
        // 1. è§£ç æ¶ˆæ¯
        (address user, address tokenOut, uint256 minAmountOut) = 
            abi.decode(_payload, (address, address, uint256));
        
        // 2. åœ¨ç›®æ ‡é“¾é‡Šæ”¾/é“¸é€ ä»£å¸
        // 3. æ‰§è¡Œäº¤æ˜“
        uint256 amountOut = router.swap(...);
        IERC20(tokenOut).transfer(user, amountOut);
    }
}
```

**ç”¨æˆ·ä½“éªŒ**:

```
ç”¨æˆ·éœ€æ±‚: Arbitrum ETH â†’ Optimism USDT

æ“ä½œ:
1. æˆæƒ ETH
2. è°ƒç”¨ crossChainSwap
3. ç­‰å¾… ~30 ç§’
4. åœ¨ Optimism æ”¶åˆ° USDT

æ‰‹ç»­è´¹:
- Gas on Arbitrum: ~$0.1
- LayerZero: ~$2
- äº¤æ˜“æ‰‹ç»­è´¹: 0.3%
æ€»è®¡: ~$2.1 + 0.3%
```

---

## äº”ã€V3 å‡çº§æ–¹æ¡ˆ

### 5.1 æ˜¯å¦åº”è¯¥å‡çº§åˆ° V3ï¼Ÿ

#### âœ… V3 çš„ä¼˜åŠ¿

1. **èµ„æœ¬æ•ˆç‡æå‡ 4000 å€**
   - ç¨³å®šå¸å¯¹å¯é›†ä¸­åœ¨ 0.99 - 1.01
   - LP æ”¶ç›Šæ˜¾è‘—æå‡

2. **çµæ´»çš„æ‰‹ç»­è´¹**
   - é€‚åº”ä¸åŒå¸‚åœº
   - æ›´æœ‰ç«äº‰åŠ›

3. **æ›´å¼ºçš„ä»·æ ¼é¢„è¨€æœº**
   - å‡ ä½•å¹³å‡ TWAP
   - æ›´æŠ—æ“çºµ

#### âŒ V3 çš„åŠ£åŠ¿

1. **æé«˜çš„å¤æ‚åº¦**
   - ä»£ç é‡ 5 å€äº V2
   - å®¡è®¡æˆæœ¬é«˜
   - Bug é£é™©å¤§

2. **ç”¨æˆ·ä½“éªŒå·®**
   - LP éœ€è¦é€‰æ‹©ä»·æ ¼åŒºé—´
   - éœ€è¦é¢‘ç¹å†å¹³è¡¡
   - é—¨æ§›é«˜

3. **Gas æˆæœ¬é«˜**
   - äº¤æ˜“ Gas å¢åŠ  20-30%
   - Mint/Burn æ›´è´µ

4. **æµåŠ¨æ€§ç¢ç‰‡åŒ–**
   - åŒä¸€å¯¹æœ‰å¤šä¸ªæ± å­ (0.01%, 0.05%, 0.3%, 1%)
   - æµåŠ¨æ€§åˆ†æ•£

### 5.2 å»ºè®®æ–¹æ¡ˆï¼š**æš‚ä¸å‡çº§ V3**

**ç†ç”±**:

1. **V2 æ›´é€‚åˆå½“å‰é˜¶æ®µ**
   - ç®€å•æ˜“ç”¨
   - ç»è¿‡éªŒè¯
   - ç”¨æˆ·é—¨æ§›ä½

2. **å¯ä»¥æ··åˆæ¶æ„**
   - ä¸»æµå¸å¯¹: V2
   - ç¨³å®šå¸å¯¹: StableSwap (ç±» Curve)
   - é•¿å°¾èµ„äº§: V2

3. **V3 çš„ 80% æ”¶ç›Šå¯ä»¥ç”¨å…¶ä»–æ–¹å¼å®ç°**
   - StableSwap â†’ ç¨³å®šå¸æ·±åº¦
   - åŠ¨æ€æ‰‹ç»­è´¹ â†’ çµæ´»å®šä»·
   - æµåŠ¨æ€§æŒ–çŸ¿ â†’ æ¿€åŠ±æ·±åº¦

### 5.3 å¦‚æœä¸€å®šè¦ V3ï¼šæ¸è¿›å¼å‡çº§

**Phase 1** (1 ä¸ªæœˆ):
- éƒ¨ç½² V3 æ ¸å¿ƒåˆçº¦
- åªæ”¯æŒ 1-2 ä¸ªæ± å­æµ‹è¯•
- V2 å’Œ V3 å¹¶è¡Œè¿è¡Œ

**Phase 2** (2 ä¸ªæœˆ):
- é€æ­¥è¿ç§»ä¸»æµäº¤æ˜“å¯¹
- æä¾›è¿ç§»æ¿€åŠ±
- æ•™è‚²ç”¨æˆ·

**Phase 3** (3 ä¸ªæœˆ):
- V2 è¿›å…¥ç»´æŠ¤æ¨¡å¼
- V3 æˆä¸ºä¸»åŠ›
- ä¿ç•™ V2 ç”¨äºé•¿å°¾èµ„äº§

---

## å…­ã€å®æ–½è·¯çº¿å›¾

### 6.1 äºŒæœŸå®Œæ•´æ—¶é—´çº¿ (6 ä¸ªæœˆ)

```
Month 1: æ ¸å¿ƒæ‰©å±•
â”œâ”€ Week 1-2: æµåŠ¨æ€§æŒ–çŸ¿
â”‚   â”œâ”€ MasterChef åˆçº¦
â”‚   â”œâ”€ åç«¯ Farming Module
â”‚   â””â”€ å‰ç«¯æŒ–çŸ¿é¡µé¢
â”œâ”€ Week 3-4: æ²»ç†ä»£å¸
â”‚   â”œâ”€ DEX Token
â”‚   â”œâ”€ Governor + Timelock
â”‚   â””â”€ æ²»ç†å‰ç«¯

Month 2: äº¤æ˜“ä¼˜åŒ–
â”œâ”€ Week 5-6: é™ä»·å•
â”‚   â”œâ”€ é“¾ä¸‹è®¢å•ç³»ç»Ÿ
â”‚   â”œâ”€ æ‰§è¡Œåˆçº¦
â”‚   â””â”€ å‰ç«¯é™ä»·å•é¡µé¢
â”œâ”€ Week 7-8: èšåˆäº¤æ˜“
â”‚   â”œâ”€ å¤š DEX è¯¢ä»·
â”‚   â”œâ”€ åˆ†å‰²ç®—æ³•
â”‚   â””â”€ èšåˆå™¨åˆçº¦

Month 3: ç¨³å®šå¸ä¼˜åŒ–
â”œâ”€ Week 9-11: StableSwap
â”‚   â”œâ”€ StableSwap åˆçº¦
â”‚   â”œâ”€ åç«¯æ”¯æŒ
â”‚   â””â”€ å‰ç«¯é›†æˆ
â”œâ”€ Week 12: æµ‹è¯•å’Œå®¡è®¡

Month 4-5: å¤šé“¾æ‰©å±•
â”œâ”€ Week 13-16: å¤šé“¾éƒ¨ç½²
â”‚   â”œâ”€ Arbitrum
â”‚   â”œâ”€ Optimism
â”‚   â”œâ”€ Base
â”‚   â””â”€ åç«¯å¤šé“¾æ”¯æŒ
â”œâ”€ Week 17-20: è·¨é“¾æ¡¥
â”‚   â”œâ”€ LayerZero é›†æˆ
â”‚   â”œâ”€ è·¨é“¾äº¤æ˜“
â”‚   â””â”€ å‰ç«¯è·¨é“¾é¡µé¢

Month 6: é«˜çº§åŠŸèƒ½
â”œâ”€ Week 21-22: NFT äº¤æ˜“
â”œâ”€ Week 23-24: æ æ†äº¤æ˜“ (å¯é€‰)
â””â”€ Week 25-26: å…¨é¢æµ‹è¯•å’Œä¸Šçº¿
```

### 6.2 ä¼˜å…ˆçº§è°ƒæ•´å»ºè®®

**å¦‚æœèµ„æºæœ‰é™ï¼Œä¼˜å…ˆåš**:

1. **æµåŠ¨æ€§æŒ–çŸ¿** (å¿…åš)
   - å¸å¼• TVL çš„å…³é”®
   - ç¤¾åŒºå†·å¯åŠ¨

2. **æ²»ç†ä»£å¸** (å¿…åš)
   - ä»£å¸ä»·å€¼æ•è·
   - ç¤¾åŒºæ²»ç†

3. **é™ä»·å•** (å¿…åš)
   - ç”¨æˆ·å¼ºéœ€æ±‚
   - ç«äº‰åŠ›æå‡

4. **èšåˆäº¤æ˜“** (å¿…åš)
   - æœ€ä¼˜ä»·æ ¼
   - æ ¸å¿ƒç«äº‰åŠ›

**å¦‚æœèµ„æºå……è¶³ï¼Œå†åŠ ä¸Š**:

5. **StableSwap**
   - ç¨³å®šå¸æ·±åº¦
   - å·®å¼‚åŒ–ç«äº‰

6. **å¤šé“¾æ”¯æŒ**
   - å¸‚åœºæ‰©å±•
   - TVL æå‡

**å¯ä»¥æš‚ç¼“**:

- è·¨é“¾æ¡¥ (å¤æ‚åº¦é«˜ï¼Œå¯ç”¨ç¬¬ä¸‰æ–¹)
- æ æ†/æœŸæƒ/æ°¸ç»­ (è¡ç”Ÿå“ï¼Œé£é™©å¤§)
- V3 å‡çº§ (æ”¶ç›Šæœ‰é™ï¼Œå¤æ‚åº¦é«˜)

---

## ä¸ƒã€å¸‚åœºå¯¹æ ‡åˆ†æ

### 7.1 ä¸åŒå®šä½çš„é€‰æ‹©

**é€‰é¡¹ A: é€šç”¨å‹ DEX (å¯¹æ ‡ Uniswap, SushiSwap)**
```
ä¼˜åŠ¿: è¦†ç›–æ‰€æœ‰ä»£å¸
åŠ£åŠ¿: ç«äº‰æ¿€çƒˆ

å¿…åšåŠŸèƒ½:
- âœ… æµåŠ¨æ€§æŒ–çŸ¿
- âœ… æ²»ç†ä»£å¸
- âœ… èšåˆäº¤æ˜“
- âœ… é™ä»·å•
- âœ… å¤šé“¾æ”¯æŒ
```

**é€‰é¡¹ B: ç¨³å®šå¸ä¸“å®¶ (å¯¹æ ‡ Curve)**
```
ä¼˜åŠ¿: ä½æ»‘ç‚¹ã€å¤§èµ„é‡‘é‡
åŠ£åŠ¿: å¸‚åœºå‚ç›´

å¿…åšåŠŸèƒ½:
- âœ… StableSwap
- âœ… æµåŠ¨æ€§æŒ–çŸ¿
- âœ… æ²»ç†ä»£å¸
- âœ… å¤šæ± å­ (3pool, 4pool)
```

**é€‰é¡¹ C: è¡ç”Ÿå“å¹³å° (å¯¹æ ‡ dYdX, GMX)**
```
ä¼˜åŠ¿: é«˜æ”¶ç›Šã€é«˜æ æ†
åŠ£åŠ¿: é£é™©å¤§ã€ç›‘ç®¡

å¿…åšåŠŸèƒ½:
- âœ… æ°¸ç»­åˆçº¦
- âœ… é¢„è¨€æœº
- âœ… æ¸…ç®—ç³»ç»Ÿ
- âœ… ä¿è¯é‡‘ç®¡ç†
```

**é€‰é¡¹ D: èšåˆå™¨ (å¯¹æ ‡ 1inch)**
```
ä¼˜åŠ¿: æœ€ä¼˜ä»·æ ¼ã€ç”¨æˆ·ç²˜æ€§
åŠ£åŠ¿: ä¾èµ–ç¬¬ä¸‰æ–¹æµåŠ¨æ€§

å¿…åšåŠŸèƒ½:
- âœ… å¤š DEX è¯¢ä»·
- âœ… è·¯å¾„ä¼˜åŒ–
- âœ… é™ä»·å•
- âœ… Gas ä¼˜åŒ–
```

### 7.2 æˆ‘çš„å»ºè®®

**æ¨èå®šä½**: **é€šç”¨å‹ DEX + ç¨³å®šå¸ä¼˜åŒ–**

**ç†ç”±**:
1. V2 æ¶æ„é€‚åˆé€šç”¨åœºæ™¯
2. åŠ ä¸Š StableSwap å¯ä»¥è·å¾—ç¨³å®šå¸å¸‚åœº
3. ä¸éœ€è¦é‡å†™æ ¸å¿ƒåˆçº¦
4. æµåŠ¨æ€§æŒ–çŸ¿ + æ²»ç†ä»£å¸ â†’ ç¤¾åŒºé©±åŠ¨

**å·®å¼‚åŒ–**:
- ğŸ”¥ æœ€ä½çš„ç¨³å®šå¸æ»‘ç‚¹ (StableSwap)
- ğŸ”¥ æœ€ä¼˜çš„ä»·æ ¼ (èšåˆå™¨)
- ğŸ”¥ æœ€çµæ´»çš„äº¤æ˜“ (é™ä»·å•)
- ğŸ”¥ æœ€ä¸°å¯Œçš„æŒ–çŸ¿å¥–åŠ±

---

## å…«ã€æˆæœ¬ä¼°ç®—

### 8.1 å¼€å‘æˆæœ¬

| åŠŸèƒ½ | å·¥ä½œé‡ | äººåŠ› | æˆæœ¬ |
|------|--------|------|------|
| æµåŠ¨æ€§æŒ–çŸ¿ | 2 å‘¨ | 1 äºº | $8,000 |
| æ²»ç†ä»£å¸ | 2 å‘¨ | 1 äºº | $8,000 |
| é™ä»·å• | 2 å‘¨ | 1 äºº | $8,000 |
| èšåˆäº¤æ˜“ | 3 å‘¨ | 1 äºº | $12,000 |
| StableSwap | 3 å‘¨ | 1 äºº | $12,000 |
| å¤šé“¾æ”¯æŒ | 4 å‘¨ | 2 äºº | $32,000 |
| è·¨é“¾æ¡¥ | 4 å‘¨ | 1 äºº | $16,000 |
| **æ€»è®¡** | **20 å‘¨** | **2-3 äºº** | **$96,000** |

### 8.2 å®¡è®¡æˆæœ¬

| é¡¹ç›® | æˆæœ¬ |
|------|------|
| åˆçº¦å®¡è®¡ (CertiK/OpenZeppelin) | $50,000 - $150,000 |
| Bug Bounty | $10,000 - $50,000 |
| æµ‹è¯•ç½‘æµ‹è¯• | $5,000 |
| **æ€»è®¡** | **$65,000 - $205,000** |

### 8.3 è¿è¥æˆæœ¬

| é¡¹ç›® | æœˆæˆæœ¬ |
|------|--------|
| æœåŠ¡å™¨ (äº‘) | $500 |
| RPC èŠ‚ç‚¹ | $1,000 |
| æ•°æ®åº“ | $300 |
| ç›‘æ§å‘Šè­¦ | $200 |
| CDN | $100 |
| **æ€»è®¡** | **$2,100/æœˆ** |

### 8.4 æ€»æˆæœ¬ä¼°ç®—

```
å¼€å‘: $96,000
å®¡è®¡: $100,000 (ä¸­ä½æ•°)
è¿è¥ (ç¬¬ä¸€å¹´): $25,000
æ€»è®¡: $221,000

å¦‚æœèèµ„:
- Seed Round: $500,000 - $2,000,000
  ç”¨é€”: å¼€å‘ã€å®¡è®¡ã€åˆå§‹æµåŠ¨æ€§ã€è¥é”€
```

---

## ä¹ã€æ€»ç»“å’Œå»ºè®®

### âœ… æ ¸å¿ƒè§‚ç‚¹

1. **å½“å‰ V2 æ¶æ„æ²¡é—®é¢˜**
   - é€‚åˆå½“å‰é˜¶æ®µ
   - ç®€å•å¯é 
   - ç¤¾åŒºæ¥å—åº¦é«˜

2. **ä¸å»ºè®®å‡çº§ V3**
   - å¤æ‚åº¦å¤ªé«˜
   - ç”¨æˆ·ä½“éªŒå·®
   - 80% æ”¶ç›Šå¯ç”¨å…¶ä»–æ–¹å¼å®ç°

3. **äºŒæœŸé‡ç‚¹: 4 å¤§æ ¸å¿ƒåŠŸèƒ½**
   - æµåŠ¨æ€§æŒ–çŸ¿ (å†·å¯åŠ¨)
   - æ²»ç†ä»£å¸ (ä»·å€¼æ•è·)
   - é™ä»·å• (ç”¨æˆ·ä½“éªŒ)
   - èšåˆäº¤æ˜“ (ä»·æ ¼ä¼˜åŠ¿)

4. **å·®å¼‚åŒ–ç«äº‰**
   - é€šç”¨ DEX (V2) + ç¨³å®šå¸ä¼˜åŒ– (StableSwap)
   - æœ€ä¼˜ä»·æ ¼ (èšåˆå™¨)
   - å¤šé“¾æ”¯æŒ (æ‰©å¤§å¸‚åœº)

### ğŸ“‹ äºŒæœŸ MVP (æœ€å°å¯è¡Œäº§å“)

**4 ä¸ªæœˆå®Œæˆæ ¸å¿ƒåŠŸèƒ½**:

1. **Month 1**: æµåŠ¨æ€§æŒ–çŸ¿ + æ²»ç†ä»£å¸
2. **Month 2**: é™ä»·å• + èšåˆäº¤æ˜“
3. **Month 3**: StableSwap + æµ‹è¯•
4. **Month 4**: å¤šé“¾éƒ¨ç½² (Arbitrum, Optimism)

**é¢„ç®—**: $65,000 (å¼€å‘) + $60,000 (å®¡è®¡) = $125,000

**ç›®æ ‡ TVL**: $10,000,000 (é€šè¿‡æµåŠ¨æ€§æŒ–çŸ¿æ¿€åŠ±)

### ğŸ¯ æˆåŠŸæŒ‡æ ‡

```
3 ä¸ªæœˆ:
- TVL: $5M
- æ—¥äº¤æ˜“é‡: $500K
- ç”¨æˆ·æ•°: 1,000

6 ä¸ªæœˆ:
- TVL: $20M
- æ—¥äº¤æ˜“é‡: $2M
- ç”¨æˆ·æ•°: 5,000

1 å¹´:
- TVL: $100M
- æ—¥äº¤æ˜“é‡: $10M
- ç”¨æˆ·æ•°: 20,000
```

---

**ä¸‹ä¸€æ­¥è¡ŒåŠ¨**:
1. ç¡®å®šäºŒæœŸåŠŸèƒ½ä¼˜å…ˆçº§
2. ç»„å»ºå¼€å‘å›¢é˜Ÿ
3. å¼€å§‹æµåŠ¨æ€§æŒ–çŸ¿å¼€å‘
4. å‡†å¤‡æ²»ç†ä»£å¸ç»æµå­¦
5. è”ç³»å®¡è®¡å…¬å¸

---

*æ–‡æ¡£ç‰ˆæœ¬: 1.0*  
*åˆ›å»ºæ—¥æœŸ: 2025-10-28*  
*é¢„è®¡å¼€å‘å‘¨æœŸ: 4-6 ä¸ªæœˆ*  
*é¢„è®¡æˆæœ¬: $125,000 - $220,000*

